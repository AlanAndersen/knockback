// Knockout JavaScript library v2.1.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(e,t,n,r){var i;if(typeof require!="undefined")try{i=require("lodash")}catch(s){i=require("underscore")}else i=e._;i&&i.hasOwnProperty("_")&&(i=i._);var o=!0;!function(t){if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var n=module.exports||exports;t(n)}else typeof define=="function"&&define.amd?define(["exports"],t):t(e.ko={})}(function(s){function a(e){var t=this;if(e)for(var n in e){var r=u.extenders[n];typeof r=="function"&&(t=r(t,e[n]))}return t}function d(e,t,n){n&&t!==u.selectExtensions.readValue(e)&&u.selectExtensions.writeValue(e,t),t!==u.selectExtensions.readValue(e)&&u.utils.triggerEvent(e,"change")}var u=typeof s!="undefined"?s:{};u.exportSymbol=function(e,t){var n=e.split("."),r=u;for(var i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},u.exportProperty=function(e,t,n){e[t]=n},u.version="2.1.0",u.exportSymbol("version",u.version),u.utils=new function(){function y(e,t){if(u.utils.tagNameLower(e)!=="input"||!e.type)return!1;if(t.toLowerCase()!="click")return!1;var n=e.type;return n=="checkbox"||n=="radio"}var s=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,o={},a={},f=/Firefox\/2/i.test(n.userAgent)?"KeyboardEvent":"UIEvents";o[f]=["keyup","keydown","keypress"],o.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var l in o){var c=o[l];if(c.length)for(var h=0,p=c.length;h<p;h++)a[c[h]]=l}var d={propertychange:!0},v=function(){var e=3,n=t.createElement("div"),i=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0]);return e>4?e:r}(),m=v===6,g=v===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:i.each,arrayIndexOf:i.indexOf,arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return null},arrayRemoveItem:function(e,t){var n=u.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:i.uniq,arrayMap:i.map,arrayFilter:i.filter,arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},extend:i.extend,emptyDomNode:function(e){while(e.firstChild)u.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){var n=u.utils.makeArray(e),r=t.createElement("div");for(var i=0,s=n.length;i<s;i++)u.cleanNode(n[i]),r.appendChild(n[i]);return r},setDomNodeChildren:function(e,t){u.utils.emptyDomNode(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var r=n[0],i=r.parentNode;for(var s=0,o=t.length;s<o;s++)i.insertBefore(t[s],r);for(var s=0,o=n.length;s<o;s++)u.removeNode(n[s])}},setOptionNodeSelectionState:function(e,t){n.userAgent.indexOf("MSIE 6")>=0?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return(e||"").replace(s,"")},stringTokenize:function(e,t){var n=[],r=(e||"").split(t);for(var i=0,s=r.length;i<s;i++){var o=u.utils.stringTrim(r[i]);o!==""&&n.push(o)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},buildEvalWithinScopeFunction:function(e,t){var n="return ("+e+")";for(var r=0;r<t;r++)n="with(sc["+r+"]) { "+n+" } ";return new Function("sc",n)},domNodeIsContainedBy:function(e,t){if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e!=null){if(e==t)return!0;e=e.parentNode}return!1},domNodeIsAttachedToDocument:function(e){return u.utils.domNodeIsContainedBy(e,e.ownerDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(e,t,n){var r=v&&d[t];if(!r&&typeof jQuery!="undefined"){if(y(e,t)){var i=n;n=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),i.call(this,e),this.checked=n}}jQuery(e).bind(t,n)}else if(!r&&typeof e.addEventListener=="function")e.addEventListener(t,n,!1);else{if(typeof e.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");e.attachEvent("on"+t,function(t){n.call(e,t)})}},triggerEvent:function(n,r){if(!n||!n.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var i=[];y(n,r)&&i.push({checkedStateBeforeEvent:n.checked}),jQuery(n).trigger(r,i)}else if(typeof t.createEvent=="function"){if(typeof n.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var s=a[r]||"HTMLEvents",o=t.createEvent(s);o.initEvent(r,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(o)}else{if(typeof n.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");y(n,r)&&(n.checked=n.checked!==!0),n.fireEvent("on"+r)}},unwrapObservable:function(e){return u.isObservable(e)?e():e},toggleDomNodeCssClass:function(e,t,n){var r=(e.className||"").split(/\s+/),i=u.utils.arrayIndexOf(r,t)>=0;if(n&&!i)e.className+=(r[0]?" ":"")+t;else if(i&&!n){var s="";for(var o=0;o<r.length;o++)r[o]!=t&&(s+=r[o]+" ");e.className=u.utils.stringTrim(s)}},setTextContent:function(e,t){var n=u.utils.unwrapObservable(t);if(n===null||n===r)n="";"innerText"in e?e.innerText=n:e.textContent=n,v>=9&&(e.style.display=e.style.display)},ensureSelectElementIsRenderedCorrectly:function(e){if(v>=9){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=u.utils.unwrapObservable(e),t=u.utils.unwrapObservable(t);var n=[];for(var r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},isIe6:m,isIe7:g,ieVersion:v,getFormFields:function(e,t){var n=u.utils.makeArray(e.getElementsByTagName("input")).concat(u.utils.makeArray(e.getElementsByTagName("textarea"))),r=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[];for(var s=n.length-1;s>=0;s--)r(n[s])&&i.push(n[s]);return i}}},u.exportSymbol("utils",u.utils),u.exportSymbol("utils.arrayForEach",u.utils.arrayForEach),u.exportSymbol("utils.arrayFirst",u.utils.arrayFirst),u.exportSymbol("utils.arrayFilter",u.utils.arrayFilter),u.exportSymbol("utils.arrayGetDistinctValues",u.utils.arrayGetDistinctValues),u.exportSymbol("utils.arrayIndexOf",u.utils.arrayIndexOf),u.exportSymbol("utils.arrayMap",u.utils.arrayMap),u.exportSymbol("utils.arrayPushAll",u.utils.arrayPushAll),u.exportSymbol("utils.arrayRemoveItem",u.utils.arrayRemoveItem),u.exportSymbol("utils.extend",u.utils.extend),u.exportSymbol("utils.fieldsIncludedWithJsonPost",u.utils.fieldsIncludedWithJsonPost),u.exportSymbol("utils.getFormFields",u.utils.getFormFields),u.exportSymbol("utils.postJson",u.utils.postJson),u.exportSymbol("utils.parseJson",u.utils.parseJson),u.exportSymbol("utils.registerEventHandler",u.utils.registerEventHandler),u.exportSymbol("utils.stringifyJson",u.utils.stringifyJson),u.exportSymbol("utils.range",u.utils.range),u.exportSymbol("utils.toggleDomNodeCssClass",u.utils.toggleDomNodeCssClass),u.exportSymbol("utils.triggerEvent",u.utils.triggerEvent),u.exportSymbol("utils.unwrapObservable",u.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),u.utils.domData=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=u.utils.domData.getAll(e,!1);return n===r?r:n[t]},set:function(e,t,n){if(n===r&&u.utils.domData.getAll(e,!1)===r)return;var i=u.utils.domData.getAll(e,!0);i[t]=n},getAll:function(i,s){var o=i[t],u=o&&o!=="null";if(!u){if(!s)return r;o=i[t]="ko"+e++,n[o]={}}return n[o]},clear:function(e){var r=e[t];r&&(delete n[r],e[t]=null)}}},u.exportSymbol("utils.domData",u.utils.domData),u.exportSymbol("utils.domData.clear",u.utils.domData.clear),u.utils.domNodeDisposal=new function(){function i(t,n){var i=u.utils.domData.get(t,e);return i===r&&n&&(i=[],u.utils.domData.set(t,e,i)),i}function s(t){u.utils.domData.set(t,e,r)}function o(e){var t=i(e,!1);if(t){t=t.slice(0);for(var r=0;r<t.length;r++)t[r](e)}u.utils.domData.clear(e),typeof jQuery=="function"&&typeof jQuery["cleanData"]=="function"&&jQuery.cleanData([e]),n[e.nodeType]&&a(e)}function a(e){var t,n=e.firstChild;while(t=n)n=t.nextSibling,t.nodeType===8&&o(t)}var e="__ko_domNodeDisposal__"+(new Date).getTime(),t={1:!0,8:!0,9:!0},n={1:!0,9:!0};return{addDisposeCallback:function(e,t){if(typeof t!="function")throw new Error("Callback must be a function");i(e,!0).push(t)},removeDisposeCallback:function(e,t){var n=i(e,!1);n&&(u.utils.arrayRemoveItem(n,t),n.length==0&&s(e))},cleanNode:function(e){if(t[e.nodeType]){o(e);if(n[e.nodeType]){var r=[];u.utils.arrayPushAll(r,e.getElementsByTagName("*"));for(var i=0,s=r.length;i<s;i++)o(r[i])}}},removeNode:function(e){u.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},u.cleanNode=u.utils.domNodeDisposal.cleanNode,u.removeNode=u.utils.domNodeDisposal.removeNode,u.exportSymbol("cleanNode",u.cleanNode),u.exportSymbol("removeNode",u.removeNode),u.exportSymbol("utils.domNodeDisposal",u.utils.domNodeDisposal),u.exportSymbol("utils.domNodeDisposal.addDisposeCallback",u.utils.domNodeDisposal.addDisposeCallback),u.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",u.utils.domNodeDisposal.removeDisposeCallback),function(){function i(n){var r=u.utils.stringTrim(n).toLowerCase(),i=t.createElement("div"),s=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],o="ignored<div>"+s[1]+n+s[2]+"</div>";typeof e["innerShiv"]=="function"?i.appendChild(e.innerShiv(o)):i.innerHTML=o;while(s[0]--)i=i.lastChild;return u.utils.makeArray(i.lastChild.childNodes)}function s(e){var t=jQuery.clean([e]);if(t&&t[0]){var n=t[0];while(n.parentNode&&n.parentNode.nodeType!==11)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}var n=/^(\s*)<!--(.*?)-->/;u.utils.parseHtmlFragment=function(e){return typeof jQuery!="undefined"?s(e):i(e)},u.utils.setHtml=function(e,t){u.utils.emptyDomNode(e);if(t!==null&&t!==r){typeof t!="string"&&(t=t.toString());if(typeof jQuery!="undefined")jQuery(e).html(t);else{var n=u.utils.parseHtmlFragment(t);for(var i=0;i<n.length;i++)e.appendChild(n[i])}}}}(),u.exportSymbol("utils.parseHtmlFragment",u.utils.parseHtmlFragment),u.exportSymbol("utils.setHtml",u.utils.setHtml),u.memoization=function(){function t(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function n(){return t()+t()}function i(e,t){if(!e)return;if(e.nodeType==8){var n=u.memoization.parseMemoText(e.nodeValue);n!=null&&t.push({domNode:e,memoId:n})}else if(e.nodeType==1)for(var r=0,s=e.childNodes,o=s.length;r<o;r++)i(s[r],t)}var e={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var r=n();return e[r]=t,"<!--[ko_memo:"+r+"]-->"},unmemoize:function(t,n){var i=e[t];if(i===r)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete e[t]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];i(e,n);for(var r=0,s=n.length;r<s;r++){var o=n[r].domNode,a=[o];t&&u.utils.arrayPushAll(a,t),u.memoization.unmemoize(n[r].memoId,a),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),u.exportSymbol("memoization",u.memoization),u.exportSymbol("memoization.memoize",u.memoization.memoize),u.exportSymbol("memoization.unmemoize",u.memoization.unmemoize),u.exportSymbol("memoization.parseMemoText",u.memoization.parseMemoText),u.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",u.memoization.unmemoizeDomNodeAndDescendants),u.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return u.dependentObservable({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){return e.equalityComparer=t=="always"?function(){return!1}:u.observable.fn.equalityComparer,e}},u.exportSymbol("extenders",u.extenders),u.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,u.exportProperty(this,"dispose",this.dispose)},u.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},u.subscribable=function(){this._subscriptions={},u.utils.extend(this,u.subscribable.fn),u.exportProperty(this,"subscribe",this.subscribe),u.exportProperty(this,"extend",this.extend),u.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var f="change";u.subscribable.fn={subscribe:function(e,t,n){n=n||f;var r=t?e.bind(t):e,i=new u.subscription(this,r,function(){u.utils.arrayRemoveItem(this._subscriptions[n],i)}.bind(this));return this._subscriptions[n]||(this._subscriptions[n]=[]),this._subscriptions[n].push(i),i},notifySubscribers:function(e,t){t=t||f,this._subscriptions[t]&&u.utils.arrayForEach(this._subscriptions[t].slice(0),function(t){t&&t.isDisposed!==!0&&t.callback(e)})},getSubscriptionsCount:function(){var e=0;for(var t in this._subscriptions)this._subscriptions.hasOwnProperty(t)&&(e+=this._subscriptions[t].length);return e},extend:a},u.isSubscribable=function(e){return typeof e.subscribe=="function"&&typeof e["notifySubscribers"]=="function"},u.exportSymbol("subscribable",u.subscribable),u.exportSymbol("isSubscribable",u.isSubscribable),u.dependencyDetection=function(){var e=[];return{begin:function(t){e.push({callback:t,distinctDependencies:[]})},end:function(){e.pop()},registerDependency:function(t){if(!u.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(e.length>0){var n=e[e.length-1];if(u.utils.arrayIndexOf(n.distinctDependencies,t)>=0)return;n.distinctDependencies.push(t),n.callback(t)}}}}();var l={"undefined":!0,"boolean":!0,number:!0,string:!0};u.observable=function(e){function n(){if(arguments.length>0){if(!n.equalityComparer||!n.equalityComparer(t,arguments[0]))n.valueWillMutate(),t=arguments[0],o&&(n._latestValue=t),n.valueHasMutated();return this}return u.dependencyDetection.registerDependency(n),t}var t=e;return o&&(n._latestValue=t),u.subscribable.call(n),n.valueHasMutated=function(){n.notifySubscribers(t)},n.valueWillMutate=function(){n.notifySubscribers(t,"beforeChange")},u.utils.extend(n,u.observable.fn),u.exportProperty(n,"valueHasMutated",n.valueHasMutated),u.exportProperty(n,"valueWillMutate",n.valueWillMutate),n},u.observable.fn={equalityComparer:function(t,n){var r=t===null||typeof t in l;return r?t===n:!1}};var c=u.observable.protoProperty="__ko_proto__";u.observable.fn[c]=u.observable,u.hasPrototype=function(e,t){return e===null||e===r||e[c]===r?!1:e[c]===t?!0:u.hasPrototype(e[c],t)},u.isObservable=function(e){return u.hasPrototype(e,u.observable)},u.isWriteableObservable=function(e){return typeof e=="function"&&e[c]===u.observable?!0:typeof e=="function"&&e[c]===u.dependentObservable&&e.hasWriteFunction?!0:!1},u.exportSymbol("observable",u.observable),u.exportSymbol("isObservable",u.isObservable),u.exportSymbol("isWriteableObservable",u.isWriteableObservable),u.observableArray=function(e){arguments.length==0&&(e=[]);if(e===null||e===r||"length"in e){var t=u.observable(e);return u.utils.extend(t,u.observableArray.fn),t}throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},u.observableArray.fn={remove:function(e){var t=this(),n=[],r=typeof e=="function"?e:function(t){return t===e};for(var i=0;i<t.length;i++){var s=t[i];r(s)&&(n.length===0&&this.valueWillMutate(),n.push(s),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===r){var t=this(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return u.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this(),n=typeof e=="function"?e:function(t){return t===e};this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var i=t[r];n(i)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===r?this.destroy(function(){return!0}):e?this.destroy(function(t){return u.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return u.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this()[n]=t,this.valueHasMutated())}},u.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){u.observableArray.fn[e]=function(){var t=this();this.valueWillMutate();var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),u.utils.arrayForEach(["slice"],function(e){u.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),u.exportSymbol("observableArray",u.observableArray),u.dependentObservable=function(e,t,n){function h(){u.utils.arrayForEach(c,function(e){e.dispose()}),c=[]}function y(){var e=w.throttleEvaluation;e&&e>=0?(clearTimeout(g),g=setTimeout(b,e)):b()}function b(){if(a)return;if(s&&v()){p();return}a=!0;try{var e=u.utils.arrayMap(c,function(e){return e.target});u.dependencyDetection.begin(function(t){var n;(n=u.utils.arrayIndexOf(e,t))>=0?e[n]=r:c.push(t.subscribe(y))});var n=f.call(t);for(var l=e.length-1;l>=0;l--)e[l]&&c.splice(l,1)[0].dispose();s=!0,w.notifySubscribers(i,"beforeChange"),i=n,o&&(w._latestValue=i)}finally{u.dependencyDetection.end()}w.notifySubscribers(i),a=!1}function w(){if(!(arguments.length>0))return S();E.apply(w,arguments)}function E(){if(typeof l!="function")throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");l.apply(t,arguments)}function S(){return s||b(),u.dependencyDetection.registerDependency(w),i}var i,s=!1,a=!1,f=e;f&&typeof f=="object"?(n=f,f=n.read):(n=n||{},f||(f=n.read));if(typeof f!="function")throw new Error("Pass a function that returns the value of the ko.computed");var l=n.write;t||(t=n.owner);var c=[],p=h,d=typeof n["disposeWhenNodeIsRemoved"]=="object"?n.disposeWhenNodeIsRemoved:null,v=n.disposeWhen||function(){return!1};if(d){p=function(){u.utils.domNodeDisposal.removeDisposeCallback(d,arguments.callee),h()},u.utils.domNodeDisposal.addDisposeCallback(d,p);var m=v;v=function(){return!u.utils.domNodeIsAttachedToDocument(d)||m()}}var g=null;return w.getDependenciesCount=function(){return c.length},w.hasWriteFunction=typeof n.write=="function",w.dispose=function(){p()},u.subscribable.call(w),u.utils.extend(w,u.dependentObservable.fn),n.deferEvaluation!==!0&&b(),u.exportProperty(w,"dispose",w.dispose),u.exportProperty(w,"getDependenciesCount",w.getDependenciesCount),w},u.isComputed=function(e){return u.hasPrototype(e,u.dependentObservable)};var h=u.observable.protoProperty;u.dependentObservable[h]=u.observable,u.dependentObservable.fn={},u.dependentObservable.fn[h]=u.dependentObservable,u.exportSymbol("dependentObservable",u.dependentObservable),u.exportSymbol("computed",u.dependentObservable),u.exportSymbol("isComputed",u.isComputed),function(){var e="__ko__hasDomDataOptionValue__";u.selectExtensions={readValue:function(t){switch(u.utils.tagNameLower(t)){case"option":if(t[e]===!0)return u.utils.domData.get(t,u.bindingHandlers.options.optionValueDomDataKey);return t.getAttribute("value");case"select":return t.selectedIndex>=0?u.selectExtensions.readValue(t.options[t.selectedIndex]):r;default:return t.value}},writeValue:function(t,n){switch(u.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":u.utils.domData.set(t,u.bindingHandlers.options.optionValueDomDataKey,r),e in t&&delete t[e],t.value=n;break;default:u.utils.domData.set(t,u.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value=typeof n=="number"?n:""}break;case"select":for(var i=t.options.length-1;i>=0;i--)if(u.selectExtensions.readValue(t.options[i])==n){t.selectedIndex=i;break}break;default:if(n===null||n===r)n="";t.value=n}}}}(),u.exportSymbol("selectExtensions",u.selectExtensions),u.exportSymbol("selectExtensions.readValue",u.selectExtensions.readValue),u.exportSymbol("selectExtensions.writeValue",u.selectExtensions.writeValue),u.jsonExpressionRewriting=function(){function r(t,n){var r=null;while(t!=r)r=t,t=t.replace(e,function(e,t){return n[t]});return t}function i(e){return u.utils.arrayIndexOf(n,u.utils.stringTrim(e).toLowerCase())>=0?!1:e.match(t)!==null}function s(e){var t=u.utils.stringTrim(e);switch(t.length&&t.charAt(0)){case"'":case'"':return e;default:return"'"+t+"'"}}var e=/\@ko_token_(\d+)\@/g,t=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,n=["true","false"];return{bindingRewriteValidators:[],parseObjectLiteral:function(e){var t=u.utils.stringTrim(e);if(t.length<3)return[];t.charAt(0)==="{"&&(t=t.substring(1,t.length-1));var n=[],i=null,s;for(var o=0;o<t.length;o++){var a=t.charAt(o);if(i===null)switch(a){case'"':case"'":case"/":i=o,s=a}else if(a==s&&t.charAt(o-1)!=="\\"){var f=t.substring(i,o+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(o+1),o-=f.length-l.length,i=null}}i=null,s=null;var c=0,h=null;for(var o=0;o<t.length;o++){var a=t.charAt(o);if(i===null)switch(a){case"{":i=o,h=a,s="}";break;case"(":i=o,h=a,s=")";break;case"[":i=o,h=a,s="]"}if(a===h)c++;else if(a===s){c--;if(c===0){var f=t.substring(i,o+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(o+1),o-=f.length-l.length,i=null}}}var p=[],d=t.split(",");for(var v=0,m=d.length;v<m;v++){var g=d[v],y=g.indexOf(":");if(y>0&&y<g.length-1){var b=g.substring(0,y),w=g.substring(y+1);p.push({key:r(b,n),value:r(w,n)})}else p.push({unknown:r(g,n)})}return p},insertPropertyAccessorsIntoJson:function(e){var t=typeof e=="string"?u.jsonExpressionRewriting.parseObjectLiteral(e):e,n=[],r=[],o;for(var a=0;o=t[a];a++){n.length>0&&n.push(",");if(o.key){var f=s(o.key),l=o.value;n.push(f),n.push(":"),n.push(l),i(u.utils.stringTrim(l))&&(r.length>0&&r.push(", "),r.push(f+" : function(__ko_value) { "+l+" = __ko_value; }"))}else o.unknown&&n.push(o.unknown)}var c=n.join("");if(r.length>0){var h=r.join("");c=c+", '_ko_property_writers' : { "+h+" } "}return c},keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(u.utils.stringTrim(e[n]["key"])==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(!e||!u.isWriteableObservable(e)){var s=t()._ko_property_writers;s&&s[n]&&s[n](r)}else(!i||e()!==r)&&e(r)}}}(),u.exportSymbol("jsonExpressionRewriting",u.jsonExpressionRewriting),u.exportSymbol("jsonExpressionRewriting.bindingRewriteValidators",u.jsonExpressionRewriting.bindingRewriteValidators),u.exportSymbol("jsonExpressionRewriting.parseObjectLiteral",u.jsonExpressionRewriting.parseObjectLiteral),u.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",u.jsonExpressionRewriting.insertPropertyAccessorsIntoJson),function(){function s(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(n)}function o(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(r)}function a(e,t){var n=e,r=1,i=[];while(n=n.nextSibling){if(o(n)){r--;if(r===0)return i}i.push(n),s(n)&&r++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function f(e,t){var n=a(e,t);return n?n.length>0?n[n.length-1].nextSibling:e.nextSibling:null}function l(e){var t=e.firstChild,n=null;if(t)do if(n)n.push(t);else if(s(t)){var r=f(t,!0);r?t=r:n=[t]}else o(t)&&(n=[t]);while(t=t.nextSibling);return n}var e=t.createComment("test").text==="<!--test-->",n=e?/^<!--\s*ko\s+(.*\:.*)\s*-->$/:/^\s*ko\s+(.*\:.*)\s*$/,r=e?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};u.virtualElements={allowedBindings:{},childNodes:function(e){return s(e)?a(e):e.childNodes},emptyNode:function(e){if(!s(e))u.utils.emptyDomNode(e);else{var t=u.virtualElements.childNodes(e);for(var n=0,r=t.length;n<r;n++)u.removeNode(t[n])}},setDomNodeChildren:function(e,t){if(!s(e))u.utils.setDomNodeChildren(e,t);else{u.virtualElements.emptyNode(e);var n=e.nextSibling;for(var r=0,i=t.length;r<i;r++)n.parentNode.insertBefore(t[r],n)}},prepend:function(e,t){s(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){s(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t)},firstChild:function(e){return s(e)?!e.nextSibling||o(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return s(e)&&(e=f(e)),e.nextSibling&&o(e.nextSibling)?null:e.nextSibling},virtualNodeBindingValue:function(e){var t=s(e);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(!i[u.utils.tagNameLower(e)])return;var t=e.firstChild;if(t)do if(t.nodeType===1){var n=l(t);if(n){var r=t.nextSibling;for(var s=0;s<n.length;s++)r?e.insertBefore(n[s],r):e.appendChild(n[s])}}while(t=t.nextSibling)}}}(),u.exportSymbol("virtualElements",u.virtualElements),u.exportSymbol("virtualElements.allowedBindings",u.virtualElements.allowedBindings),u.exportSymbol("virtualElements.emptyNode",u.virtualElements.emptyNode),u.exportSymbol("virtualElements.insertAfter",u.virtualElements.insertAfter),u.exportSymbol("virtualElements.prepend",u.virtualElements.prepend),u.exportSymbol("virtualElements.setDomNodeChildren",u.virtualElements.setDomNodeChildren),function(){function t(e,t,r){var i=t+"_"+e;return r[i]||(r[i]=n(e,t))}function n(e,t){var n=" { "+u.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(e)+" } ";return u.utils.buildEvalWithinScopeFunction(n,t)}var e="data-bind";u.bindingProvider=function(){this.bindingCache={}},u.utils.extend(u.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(e)!=null;case 8:return u.virtualElements.virtualNodeBindingValue(t)!=null;default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t):null},getBindingsString:function(t,n){switch(t.nodeType){case 1:return t.getAttribute(e);case 8:return u.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n){try{var r=n.$data,i=typeof r=="object"&&r!=null?[r,n]:[n],s=t(e,i.length,this.bindingCache);return s(i)}catch(o){throw new Error("Unable to parse bindings.\nMessage: "+o+";\nBindings value: "+e)}}}),u.bindingProvider.instance=new u.bindingProvider}(),u.exportSymbol("bindingProvider",u.bindingProvider),function(){function t(e){var t=u.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function n(e,t,n){var r,s=u.virtualElements.firstChild(t);while(r=s)s=u.virtualElements.nextSibling(r),i(e,r,n)}function i(e,t,r){var i=!0,o=t.nodeType===1;o&&u.virtualElements.normaliseVirtualElementDomStructure(t);var a=o&&r||u.bindingProvider.instance.nodeHasBindings(t);a&&(i=s(t,null,e,r).shouldBindDescendants),i&&n(e,t,!o)}function s(e,n,i,s){function f(e){return function(){return a[e]}}function l(){return a}var o=0,a,c;return u.dependentObservable(function(){var h=i&&i instanceof u.bindingContext?i:new u.bindingContext(u.utils.unwrapObservable(i)),p=h.$data;s&&u.storedBindingContextForNode(e,h);var d=typeof n=="function"?n():n;a=d||u.bindingProvider.instance.getBindings(e,h);if(a){if(o===0){o=1;for(var v in a){var m=u.bindingHandlers[v];m&&e.nodeType===8&&t(v);if(m&&typeof m["init"]=="function"){var g=m.init,y=g(e,f(v),l,p,h);if(y&&y.controlsDescendantBindings){if(c!==r)throw new Error("Multiple bindings ("+c+" and "+v+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");c=v}}}o=2}if(o===2)for(var v in a){var m=u.bindingHandlers[v];if(m&&typeof m["update"]=="function"){var b=m.update;b(e,f(v),l,p,h)}}}},null,{disposeWhenNodeIsRemoved:e}),{shouldBindDescendants:c===r}}u.bindingHandlers={},u.bindingContext=function(e,t){t?(u.utils.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e),this.$data=e},u.bindingContext.prototype.createChildContext=function(e){return new u.bindingContext(e,this)},u.bindingContext.prototype.extend=function(e){var t=u.utils.extend(new u.bindingContext,this);return u.utils.extend(t,e)};var o="__ko_bindingContext__";u.storedBindingContextForNode=function(e,t){if(arguments.length!=2)return u.utils.domData.get(e,o);u.utils.domData.set(e,o,t)},u.applyBindingsToNode=function(e,t,n){return e.nodeType===1&&u.virtualElements.normaliseVirtualElementDomStructure(e),s(e,t,n,!0)},u.applyBindingsToDescendants=function(e,t){(t.nodeType===1||t.nodeType===8)&&n(e,t,!0)},u.applyBindings=function(t,n){if(n&&n.nodeType!==1&&n.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||e.document.body,i(t,n,!0)},u.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=u.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return u.contextFor(e.parentNode)}return r},u.dataFor=function(e){var t=u.contextFor(e);return t?t.$data:r},u.exportSymbol("bindingHandlers",u.bindingHandlers),u.exportSymbol("applyBindings",u.applyBindings),u.exportSymbol("applyBindingsToDescendants",u.applyBindingsToDescendants),u.exportSymbol("applyBindingsToNode",u.applyBindingsToNode),u.exportSymbol("contextFor",u.contextFor),u.exportSymbol("dataFor",u.dataFor)}();var p=["click"];u.utils.arrayForEach(p,function(e){u.bindingHandlers[e]={init:function(t,n,r,i){var s=function(){var t={};return t[e]=n(),t};return u.bindingHandlers.event.init.call(this,t,s,r,i)}}}),u.bindingHandlers.event={init:function(e,t,n,r){var i=t()||{};for(var s in i)(function(){var i=s;typeof i=="string"&&u.utils.registerEventHandler(e,i,function(e){var s,o=t()[i];if(!o)return;var a=n();try{var f=u.utils.makeArray(arguments);f.unshift(r),s=o.apply(r,f)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=a[i+"Bubble"]!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())})})()}},u.bindingHandlers.submit={init:function(e,t,n,r){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");u.utils.registerEventHandler(e,"submit",function(n){var i,s=t();try{i=s.call(r,e)}finally{i!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},u.bindingHandlers.visible={update:function(e,t){var n=u.utils.unwrapObservable(t()),r=e.style.display!="none";n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},u.bindingHandlers.enable={update:function(e,t){var n=u.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=!0)}},u.bindingHandlers.disable={update:function(e,t){u.bindingHandlers.enable.update(e,function(){return!u.utils.unwrapObservable(t())})}},u.bindingHandlers.value={init:function(e,t,n){var r=["change"],i=n().valueUpdate;i&&(typeof i=="string"&&(i=[i]),u.utils.arrayPushAll(r,i),r=u.utils.arrayGetDistinctValues(r));var s=function(){var r=t(),i=u.selectExtensions.readValue(e);u.jsonExpressionRewriting.writeValueToProperty(r,n,"value",i,!0)},o=u.utils.ieVersion&&e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.autocomplete!="off"&&(!e.form||e.form.autocomplete!="off");if(o&&u.utils.arrayIndexOf(r,"propertychange")==-1){var a=!1;u.utils.registerEventHandler(e,"propertychange",function(){a=!0}),u.utils.registerEventHandler(e,"blur",function(){a&&(a=!1,s())})}u.utils.arrayForEach(r,function(t){var n=s;u.utils.stringStartsWith(t,"after")&&(n=function(){setTimeout(s,0)},t=t.substring("after".length)),u.utils.registerEventHandler(e,t,n)})},update:function(e,t){var n=u.utils.tagNameLower(e)==="select",r=u.utils.unwrapObservable(t()),i=u.selectExtensions.readValue(e),s=r!=i;r===0&&i!==0&&i!=="0"&&(s=!0);if(s){var o=function(){u.selectExtensions.writeValue(e,r)};o();var a=n;a&&setTimeout(o,0)}n&&e.length>0&&d(e,r,!1)}},u.bindingHandlers.options={update:function(e,n,i){if(u.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");var s=e.length==0,o=u.utils.arrayMap(u.utils.arrayFilter(e.childNodes,function(e){return e.tagName&&u.utils.tagNameLower(e)==="option"&&e.selected}),function(e){return u.selectExtensions.readValue(e)||e.innerText||e.textContent}),a=e.scrollTop,f=u.utils.unwrapObservable(n()),l=e.value;while(e.length>0)u.cleanNode(e.options[0]),e.remove(0);if(f){var c=i();typeof f.length!="number"&&(f=[f]);if(c.optionsCaption){var h=
t.createElement("option");u.utils.setHtml(h,c.optionsCaption),u.selectExtensions.writeValue(h,r),e.appendChild(h)}for(var p=0,v=f.length;p<v;p++){var h=t.createElement("option"),m=typeof c["optionsValue"]=="string"?f[p][c.optionsValue]:f[p];m=u.utils.unwrapObservable(m),u.selectExtensions.writeValue(h,m);var g=c.optionsText,y;typeof g=="function"?y=g(f[p]):typeof g=="string"?y=f[p][g]:y=m;if(y===null||y===r)y="";u.utils.setTextContent(h,y),e.appendChild(h)}var b=e.getElementsByTagName("option"),w=0;for(var p=0,v=b.length;p<v;p++)u.utils.arrayIndexOf(o,u.selectExtensions.readValue(b[p]))>=0&&(u.utils.setOptionNodeSelectionState(b[p],!0),w++);e.scrollTop=a,s&&"value"in c&&d(e,u.utils.unwrapObservable(c.value),!0),u.utils.ensureSelectElementIsRenderedCorrectly(e)}}},u.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",u.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(e){var t=[],n=e.childNodes;for(var r=0,i=n.length;r<i;r++){var s=n[r],o=u.utils.tagNameLower(s);if(o=="option"&&s.selected)t.push(u.selectExtensions.readValue(s));else if(o=="optgroup"){var a=u.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(s);Array.prototype.splice.apply(t,[t.length,0].concat(a))}}return t},init:function(e,t,n){u.utils.registerEventHandler(e,"change",function(){var e=t(),r=u.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this);u.jsonExpressionRewriting.writeValueToProperty(e,n,"value",r)})},update:function(e,t){if(u.utils.tagNameLower(e)!="select")throw new Error("values binding applies only to SELECT elements");var n=u.utils.unwrapObservable(t());if(n&&typeof n.length=="number"){var r=e.childNodes;for(var i=0,s=r.length;i<s;i++){var o=r[i];u.utils.tagNameLower(o)==="option"&&u.utils.setOptionNodeSelectionState(o,u.utils.arrayIndexOf(n,u.selectExtensions.readValue(o))>=0)}}}},u.bindingHandlers.text={update:function(e,t){u.utils.setTextContent(e,t())}},u.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){var n=u.utils.unwrapObservable(t());u.utils.setHtml(e,n)}},u.bindingHandlers.css={update:function(e,t){var n=u.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=u.utils.unwrapObservable(n[r]);u.utils.toggleDomNodeCssClass(e,r,i)}}},u.bindingHandlers.style={update:function(e,t){var n=u.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=u.utils.unwrapObservable(n[r]);e.style[r]=i||""}}},u.bindingHandlers.uniqueName={init:function(e,n){n()&&(e.name="ko_unique_"+ ++u.bindingHandlers.uniqueName.currentIndex,(u.utils.isIe6||u.utils.isIe7)&&e.mergeAttributes(t.createElement("<input name='"+e.name+"'/>"),!1))}},u.bindingHandlers.uniqueName.currentIndex=0,u.bindingHandlers.checked={init:function(e,t,n){var r=function(){var r;if(e.type=="checkbox")r=e.checked;else{if(e.type!="radio"||!e.checked)return;r=e.value}var i=t();if(e.type=="checkbox"&&u.utils.unwrapObservable(i)instanceof Array){var s=u.utils.arrayIndexOf(u.utils.unwrapObservable(i),e.value);e.checked&&s<0?i.push(e.value):!e.checked&&s>=0&&i.splice(s,1)}else u.jsonExpressionRewriting.writeValueToProperty(i,n,"checked",r,!0)};u.utils.registerEventHandler(e,"click",r),e.type=="radio"&&!e.name&&u.bindingHandlers.uniqueName.init(e,function(){return!0})},update:function(e,t){var n=u.utils.unwrapObservable(t());e.type=="checkbox"?n instanceof Array?e.checked=u.utils.arrayIndexOf(n,e.value)>=0:e.checked=n:e.type=="radio"&&(e.checked=e.value==n)}};var v={"class":"className","for":"htmlFor"};u.bindingHandlers.attr={update:function(e,t,n){var i=u.utils.unwrapObservable(t())||{};for(var s in i)if(typeof s=="string"){var o=u.utils.unwrapObservable(i[s]),a=o===!1||o===null||o===r;a&&e.removeAttribute(s),u.utils.ieVersion<=8&&s in v?(s=v[s],a?e.removeAttribute(s):e[s]=o):a||e.setAttribute(s,o.toString())}}},u.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(e){var r=t();u.jsonExpressionRewriting.writeValueToProperty(r,n,"hasfocus",e,!0)};u.utils.registerEventHandler(e,"focus",function(){r(!0)}),u.utils.registerEventHandler(e,"focusin",function(){r(!0)}),u.utils.registerEventHandler(e,"blur",function(){r(!1)}),u.utils.registerEventHandler(e,"focusout",function(){r(!1)})},update:function(e,t){var n=u.utils.unwrapObservable(t());n?e.focus():e.blur(),u.utils.triggerEvent(e,n?"focusin":"focusout")}},u.bindingHandlers["with"]={makeTemplateValueAccessor:function(e){return function(){var t=e();return{"if":t,data:t,templateEngine:u.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return u.bindingHandlers.template.init(e,u.bindingHandlers["with"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return u.bindingHandlers.template.update(e,u.bindingHandlers["with"].makeTemplateValueAccessor(t),n,r,i)}},u.jsonExpressionRewriting.bindingRewriteValidators["with"]=!1,u.virtualElements.allowedBindings["with"]=!0,u.bindingHandlers["if"]={makeTemplateValueAccessor:function(e){return function(){return{"if":e(),templateEngine:u.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return u.bindingHandlers.template.init(e,u.bindingHandlers["if"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return u.bindingHandlers.template.update(e,u.bindingHandlers["if"].makeTemplateValueAccessor(t),n,r,i)}},u.jsonExpressionRewriting.bindingRewriteValidators["if"]=!1,u.virtualElements.allowedBindings["if"]=!0,u.bindingHandlers.ifnot={makeTemplateValueAccessor:function(e){return function(){return{ifnot:e(),templateEngine:u.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return u.bindingHandlers.template.init(e,u.bindingHandlers.ifnot.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return u.bindingHandlers.template.update(e,u.bindingHandlers.ifnot.makeTemplateValueAccessor(t),n,r,i)}},u.jsonExpressionRewriting.bindingRewriteValidators.ifnot=!1,u.virtualElements.allowedBindings.ifnot=!0,u.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=u.utils.unwrapObservable(e());return!t||typeof t.length=="number"?{foreach:t,templateEngine:u.nativeTemplateEngine.instance}:{foreach:t.data,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,templateEngine:u.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return u.bindingHandlers.template.init(e,u.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return u.bindingHandlers.template.update(e,u.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},u.jsonExpressionRewriting.bindingRewriteValidators.foreach=!1,u.virtualElements.allowedBindings.foreach=!0,u.templateEngine=function(){},u.templateEngine.prototype.renderTemplateSource=function(e,t,n){throw new Error("Override renderTemplateSource")},u.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},u.templateEngine.prototype.makeTemplateSource=function(e,n){if(typeof e=="string"){n=n||t;var r=n.getElementById(e);if(!r)throw new Error("Cannot find template with ID "+e);return new u.templateSources.domElement(r)}if(e.nodeType==1||e.nodeType==8)return new u.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},u.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n)},u.templateEngine.prototype.isTemplateRewritten=function(e,n){if(this.allowTemplateRewriting===!1)return!0;var r=n&&n!=t;return!r&&this.knownRewrittenTemplates&&this.knownRewrittenTemplates[e]?!0:this.makeTemplateSource(e,n).data("isRewritten")},u.templateEngine.prototype.rewriteTemplate=function(e,n,r){var i=this.makeTemplateSource(e,r),s=n(i.text());i.text(s),i.data("isRewritten",!0);var o=r&&r!=t;!o&&typeof e=="string"&&(this.knownRewrittenTemplates=this.knownRewrittenTemplates||{},this.knownRewrittenTemplates[e]=!0)},u.exportSymbol("templateEngine",u.templateEngine),u.templateRewriting=function(){function n(e){var t=u.jsonExpressionRewriting.bindingRewriteValidators;for(var n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if(typeof i=="function"){var s=i(e[n].value);if(s)throw new Error(s)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function r(e,t,r){var i=u.jsonExpressionRewriting.parseObjectLiteral(e);n(i);var s=u.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(i),o="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+s+" } })()         })";return r.createJavaScriptEvaluatorBlock(o)+t}var e=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,t=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return u.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(n,i){return n.replace(e,function(){return r(arguments[6],arguments[1],i)}).replace(t,function(){return r(arguments[1],"<!-- ko -->",i)})},applyMemoizedBindingsToNextSibling:function(e){return u.memoization.memoize(function(t,n){t.nextSibling&&u.applyBindingsToNode(t.nextSibling,e,n)})}}}(),u.exportSymbol("templateRewriting",u.templateRewriting),u.exportSymbol("templateRewriting.applyMemoizedBindingsToNextSibling",u.templateRewriting.applyMemoizedBindingsToNextSibling),function(){u.templateSources={},u.templateSources.domElement=function(e){this.domElement=e},u.templateSources.domElement.prototype.text=function(){var e=u.utils.tagNameLower(this.domElement),t=e==="script"?"text":e==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[t];var n=arguments[0];t==="innerHTML"?u.utils.setHtml(this.domElement,n):this.domElement[t]=n},u.templateSources.domElement.prototype.data=function(e){if(arguments.length===1)return u.utils.domData.get(this.domElement,"templateSourceData_"+e);u.utils.domData.set(this.domElement,"templateSourceData_"+e,arguments[1])};var e="__ko_anon_template__";u.templateSources.anonymousTemplate=function(e){this.domElement=e},u.templateSources.anonymousTemplate.prototype=new u.templateSources.domElement,u.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var t=u.utils.domData.get(this.domElement,e)||{};return t.textData===r&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData}var n=arguments[0];u.utils.domData.set(this.domElement,e,{textData:n})},u.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var t=u.utils.domData.get(this.domElement,e)||{};return t.containerData}var n=arguments[0];u.utils.domData.set(this.domElement,e,{containerData:n})},u.exportSymbol("templateSources",u.templateSources),u.exportSymbol("templateSources.domElement",u.templateSources.domElement),u.exportSymbol("templateSources.anonymousTemplate",u.templateSources.anonymousTemplate)}(),function(){function t(e,t,n){var r,i=e,s=u.virtualElements.nextSibling(t);while(i&&(r=i)!==s)i=u.virtualElements.nextSibling(r),(r.nodeType===1||r.nodeType===8)&&n(r)}function n(e,n){if(e.length){var r=e[0],i=e[e.length-1];t(r,i,function(e){u.applyBindings(n,e)}),t(r,i,function(e){u.memoization.unmemoizeDomNodeAndDescendants(e,[n])})}}function i(e){return e.nodeType?e:e.length>0?e[0]:null}function s(t,r,s,o,a){a=a||{};var f=t&&i(t),l=f&&f.ownerDocument,c=a.templateEngine||e;u.templateRewriting.ensureTemplateIsRewritten(s,c,l);var h=c.renderTemplate(s,o,a,l);if(typeof h.length!="number"||h.length>0&&typeof h[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(r){case"replaceChildren":u.virtualElements.setDomNodeChildren(t,h),p=!0;break;case"replaceNode":u.utils.replaceDomNodes(t,h),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r)}return p&&(n(h,o),a.afterRender&&a.afterRender(h,o.$data)),h}function a(e,t){var n=u.utils.domData.get(e,o);n&&typeof n.dispose=="function"&&n.dispose(),u.utils.domData.set(e,o,t)}var e;u.setTemplateEngine=function(t){if(!(t==r||t instanceof u.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");e=t},u.renderTemplate=function(t,n,o,a,f){o=o||{};if((o["templateEngine"]||e)==r)throw new Error("Set a template engine before calling renderTemplate");f=f||"replaceChildren";if(a){var l=i(a),c=function(){return!l||!u.utils.domNodeIsAttachedToDocument(l)},h=l&&f=="replaceNode"?l.parentNode:l;return u.dependentObservable(function(){var e=n&&n instanceof u.bindingContext?n:new u.bindingContext(u.utils.unwrapObservable(n)),r=typeof t=="function"?t(e.$data):t,c=s(a,f,r,e,o);f=="replaceNode"&&(a=c,l=i(a))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:h})}return u.memoization.memoize(function(e){u.renderTemplate(t,n,o,e,"replaceNode")})},u.renderTemplateForEach=function(e,t,i,o,a){var f,l=function(t,n){var r=typeof e=="function"?e(t):e;return f=a.createChildContext(u.utils.unwrapObservable(t)),f.$index=n,s(null,"ignoreTargetNode",r,f,i)},c=function(e,t,r){n(t,f),i.afterRender&&i.afterRender(t,e)};return u.dependentObservable(function(){var e=u.utils.unwrapObservable(t)||[];typeof e.length=="undefined"&&(e=[e]);var n=u.utils.arrayFilter(e,function(e){return i.includeDestroyed||e===r||e===null||!u.utils.unwrapObservable(e._destroy)});u.utils.setDomNodeChildrenFromArrayMapping(o,n,l,i,c)},null,{disposeWhenNodeIsRemoved:o})};var o="__ko__templateSubscriptionDomDataKey__";u.bindingHandlers.template={init:function(e,t){var n=u.utils.unwrapObservable(t());if(typeof n!="string"&&!n.name&&(e.nodeType==1||e.nodeType==8)){var r=e.nodeType==1?e.childNodes:u.virtualElements.childNodes(e),i=u.utils.moveCleanedNodesToContainerElement(r);(new u.templateSources.anonymousTemplate(e)).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s=u.utils.unwrapObservable(t()),o,f=!0;typeof s=="string"?o=s:(o=s.name,"if"in s&&(f=f&&u.utils.unwrapObservable(s["if"])),"ifnot"in s&&(f=f&&!u.utils.unwrapObservable(s.ifnot)));var l=null;if(typeof s=="object"&&"foreach"in s){var c=f&&s.foreach||[];l=u.renderTemplateForEach(o||e,c,s,e,i)}else if(f){var h=typeof s=="object"&&"data"in s?i.createChildContext(u.utils.unwrapObservable(s.data)):i;l=u.renderTemplate(o||e,h,s,e)}else u.virtualElements.emptyNode(e);a(e,l)}},u.jsonExpressionRewriting.bindingRewriteValidators.template=function(e){var t=u.jsonExpressionRewriting.parseObjectLiteral(e);return t.length==1&&t[0].unknown?null:u.jsonExpressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},u.virtualElements.allowedBindings.template=!0}(),u.exportSymbol("setTemplateEngine",u.setTemplateEngine),u.exportSymbol("renderTemplate",u.renderTemplate),function(){function e(e,t,n){var i=[];for(var s=0;s<=t.length;s++)i[s]=[];for(var s=0,o=Math.min(e.length,n);s<=o;s++)i[0][s]=s;for(var s=1,o=Math.min(t.length,n);s<=o;s++)i[s][0]=s;var u,a=e.length,f,l=t.length,c,h;for(u=1;u<=a;u++){var p=Math.max(1,u-n),d=Math.min(l,u+n);for(f=p;f<=d;f++)if(e[u-1]===t[f-1])i[f][u]=i[f-1][u-1];else{var v=i[f-1][u]===r?Number.MAX_VALUE:i[f-1][u]+1,m=i[f][u-1]===r?Number.MAX_VALUE:i[f][u-1]+1;i[f][u]=Math.min(v,m)}}return i}function t(e,t,n){var i=t.length,s=n.length,o=[],u=e[s][i];if(u===r)return null;while(i>0||s>0){var a=e[s][i],f=s>0?e[s-1][i]:u+1,l=i>0?e[s][i-1]:u+1,c=s>0&&i>0?e[s-1][i-1]:u+1;if(f===r||f<a-1)f=u+1;if(l===r||l<a-1)l=u+1;c<a-1&&(c=u+1),f<=l&&f<c?(o.push({status:"added",value:n[s-1]}),s--):l<f&&l<c?(o.push({status:"deleted",value:t[i-1]}),i--):(o.push({status:"retained",value:t[i-1]}),s--,i--)}return o.reverse()}u.utils.compareArrays=function(n,i,s){if(s===r)return u.utils.compareArrays(n,i,1)||u.utils.compareArrays(n,i,10)||u.utils.compareArrays(n,i,Number.MAX_VALUE);n=n||[],i=i||[];var o=e(n,i,s);return t(o,n,i)}}(),u.exportSymbol("utils.compareArrays",u.utils.compareArrays),function(){function e(e){if(e.length>2){var t=e[0],n=e[e.length-1],r=[t];while(t!==n){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}}function t(t,n,r,i,s){var o=[],a=u.dependentObservable(function(){var t=n(r,s)||[];o.length>0&&(e(o),u.utils.replaceDomNodes(o,t),i&&i(r,t)),o.splice(0,o.length),u.utils.arrayPushAll(o,t)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return o.length==0||!u.utils.domNodeIsAttachedToDocument(o[0])}});return{mappedNodes:o,dependentObservable:a}}var n="setDomNodeChildrenFromArrayMapping_lastMappingResult";u.utils.setDomNodeChildrenFromArrayMapping=function(i,s,o,a,f){s=s||[],a=a||{};var l=u.utils.domData.get(i,n)===r,c=u.utils.domData.get(i,n)||[],h=u.utils.arrayMap(c,function(e){return e.arrayEntry}),p=u.utils.compareArrays(h,s),d=[],v=0,m=[],g=0,y=[],b=null;for(var w=0,E=p.length;w<E;w++)switch(p[w].status){case"retained":var S=c[v];S.indexObservable(g),g=d.push(S),S.domNodes.length>0&&(b=S.domNodes[S.domNodes.length-1]),v++;break;case"deleted":c[v].dependentObservable.dispose(),e(c[v].domNodes),u.utils.arrayForEach(c[v].domNodes,function(e){m.push({element:e,index:w,value:p[w].value}),b=e}),v++;break;case"added":var x=p[w].value,T=u.observable(g),N=t(i,o,x,f,T),C=N.mappedNodes;g=d.push({arrayEntry:p[w].value,domNodes:C,dependentObservable:N.dependentObservable,indexObservable:T});for(var k=0,L=C.length;k<L;k++){var A=C[k];y.push({element:A,index:w,value:p[w].value}),b==null?u.virtualElements.prepend(i,A):u.virtualElements.insertAfter(i,A,b),b=A}f&&f(x,C,T)}u.utils.arrayForEach(m,function(e){u.cleanNode(e.element)});var O=!1;if(!l){if(a.afterAdd)for(var w=0;w<y.length;w++)a.afterAdd(y[w].element,y[w].index,y[w].value);if(a.beforeRemove){for(var w=0;w<m.length;w++)a.beforeRemove(m[w].element,m[w].index,m[w].value);O=!0}}if(!O&&m.length)for(var w=0;w<m.length;w++){var M=m[w].element;M.parentNode&&M.parentNode.removeChild(M)}u.utils.domData.set(i,n,d)}}(),u.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",u.utils.setDomNodeChildrenFromArrayMapping),u.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},u.nativeTemplateEngine.prototype=new u.templateEngine,u.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n){var r=!(u.utils.ieVersion<9),i=r?e.nodes:null,s=i?e.nodes():null;if(s)return u.utils.makeArray(s.cloneNode(!0).childNodes);var o=e.text();return u.utils.parseHtmlFragment(o)},u.nativeTemplateEngine.instance=new u.nativeTemplateEngine,u.setTemplateEngine(u.nativeTemplateEngine.instance),u.exportSymbol("nativeTemplateEngine",u.nativeTemplateEngine),function(){u.jqueryTmplTemplateEngine=function(){function n(){if(e<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function r(e,t,n){return jQuery.tmpl(e,t,n)}var e=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(e,i,s){s=s||{},n();var o=e.data("precompiled");if(!o){var u=e.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",o=jQuery.template(null,u),e.data("precompiled",o)}var a=[i.$data],f=jQuery.extend({koBindingContext:i},s.templateOptions),l=r(o,a,f);return l.appendTo(t.createElement("div")),jQuery.fragments={},l},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,n){t.write("<script type='text/html' id='"+e+"'>"+n+"</script>")},e>0&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},u.jqueryTmplTemplateEngine.prototype=new u.templateEngine;var e=new u.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&u.setTemplateEngine(e),u.exportSymbol("jqueryTmplTemplateEngine",u.jqueryTmplTemplateEngine)}()})})(window,document,navigator);