/*
  knockback.js 0.16.4
  (c) 2011, 2012 Kevin Malakoff.
  Knockback.js is freely distributable under the MIT license.
  See the following for full license details:
    https://github.com/kmalakoff/knockback/blob/master/LICENSE
  Dependencies: Knockout.js, Backbone.js, and Underscore.js.
*/(function(){return function(e){return typeof define=="function"&&define.amd?define("knockback",["underscore","backbone","knockout"],e):e.call(this)}(function(){var e,t,n,r,i,s,o;return i=!window.kb&&typeof require!="undefined"?require("knockback"):window.kb,o=i._,e=i.Backbone,s=i.ko,r=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,t=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,n=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,i.validators={required:function(e){return!e},url:function(e){return!r.test(e)},email:function(e){return!t.test(e)},number:function(e){return!n.test(e)}},i.valueValidator=function(e,t){return o.isArray(t)||(t=[t]),s.dependentObservable(function(){var n,r,o,u,a,f;o={invalid:!1},r=s.utils.unwrapObservable(e);for(a=0,f=t.length;a<f;a++){n=t[a],u=i.validators[n];if(!u)continue;o[n]=u(r),o.invalid|=o[n]}return o.valid=!o.invalid,o})},i.inputValidator=function(e,t,n){var r,u,a,f,l,c,h;r=$(t),(f=r.attr("name"))&&!o.isString(f)&&(f=null),h=n&&n.skip_attach;if(!(u=r.attr("data-bind")))return null;l=s.utils.buildEvalWithinScopeFunction("{"+u+"}",1)([e]);if(!l||!l.value)return null;a=[];switch(r.attr("type")){case"url":a.push("url");break;case"email":a.push("email");break;case"number":a.push("number")}return r.attr("required")&&a.push("required"),c=i.valueValidator(l.value,a),f&&!h&&(e["$"+f]=c),c},i.formValidator=function(e,t){var n,r,u,a,f,l,c,h,p,d;f={},c=[],n=$(t),(r=n.attr("name"))&&!o.isString(r)&&(r=null),d=n.find("input");for(h=0,p=d.length;h<p;h++){u=d[h];if(!(a=$(u).attr("name")))continue;l=i.inputValidator(e,u,r?{skip_attach:!0}:null),!l||c.push(f[a]=l)}return f.valid=s.dependentObservable(function(){var e,t,n;e=!0;for(t=0,n=c.length;t<n;t++)l=c[t],e&=l().valid;return e}),f.invalid=s.dependentObservable(function(){return!f.valid()}),r&&(e["$"+r]=f),f},i})}).call(this);